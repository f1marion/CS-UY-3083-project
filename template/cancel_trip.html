{% extends "base.html" %}
{% block content %}
<h2>Cancel Trip</h2>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul>
    {% for msg in messages %}
      <li class="message">{{ msg }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

{% if flights and flights|length > 0 %}
<table border="1">
    <tr>
        <th>Ticket ID</th>
        <th>Flight Number</th>
        <th>Airline</th>
        <th>Departure Airport</th>
        <th>Arrival Airport</th>
        <th>Departure Time</th>
        <th>Arrival Time</th>
        <th>Action</th>
    </tr>
    {% for flight in flights %}
    <tr>
        <td>{{ flight.Ticket_ID }}</td>
        <td>{{ flight.Flight_num }}</td>
        <td>{{ flight.Airline_name }}</td>
        <td>{{ flight.Departure_airport }}</td>
        <td>{{ flight.Arrival_airport }}</td>
        <td>{{ flight.Departure_date_time }}</td>
        <td>{{ flight.Arrival_date_time }}</td>
        <td>
            <!-- Form to cancel this ticket -->
            <form method="post">
                <input type="hidden" name="ticket_id" value="{{ flight.Ticket_ID }}">
                <input type="submit" value="Cancel">
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No upcoming flights to cancel.</p>
{% endif %}
{% endblock %}
